# MetaMask 本地网络配置指南

## 🔧 添加 Hardhat 本地网络

请按照以下步骤在 MetaMask 中添加 Hardhat 本地网络：

### 1. 打开 MetaMask 网络设置

- 点击 MetaMask 顶部的网络下拉菜单
- 选择"添加网络"或"Add Network"

### 2. 手动添加网络

选择"手动添加网络"，然后填入以下信息：

**推荐配置（方法 1）：**

```
网络名称: Localhost 8545
新的 RPC URL: http://127.0.0.1:8545
链 ID: 31337
货币符号: ETH
区块浏览器 URL: (留空)
```

**备选配置（方法 2）：**

```
网络名称: Local Testnet
新的 RPC URL: http://localhost:8545
链 ID: 31337
货币符号: ETH
区块浏览器 URL: (留空)
```

> ⚠️ **如果遇到"代币符号与网络名称或链 ID 不匹配"错误**：
>
> 1. 删除现有网络配置
> 2. 尝试使用备选配置
> 3. 确保 RPC URL 使用 `localhost` 而不是 `127.0.0.1`

### 3. 导入测试账户（可选）

如果需要使用预设的测试账户，可以导入以下私钥：

**账户 #0** (推荐使用)

```
地址: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
私钥: 0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80
余额: 10000 ETH
```

**账户 #1**

```
地址: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8
私钥: 0x59c6995e998f97a5a0044966f0945389dc9e86dae88c7a8412f4603b6b78690d
余额: 10000 ETH
```

### 4. 验证连接

- 确保 MetaMask 已切换到 "Hardhat Local" 网络
- 确认账户余额显示为 10000 ETH
- 合约地址: `0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0`

## ⚠️ 重要提醒

1. **仅用于开发**: 这些私钥是公开的，仅用于本地开发测试
2. **不要发送真实资金**: 切勿向这些地址发送真实的 ETH 或代币
3. **网络重启**: 每次重启 Hardhat 节点时，区块链状态会重置

## 🔄 重启流程

如果需要重启本地网络：

1. 停止 Hardhat 节点 (Ctrl+C)
2. 重新运行: `npx hardhat node`
3. 重新部署合约: `npx hardhat run scripts/deploy.js --network localhost`
4. 确认新的合约地址（通常相同）

## 🛠️ 故障排除

### 问题 1：MetaMask 显示"代币符号与网络名称或链 ID 不匹配"

**解决方案：**

1. 删除 MetaMask 中现有的网络配置
2. 使用备选配置重新添加网络
3. 确保使用 `http://localhost:8545` 而不是 `http://127.0.0.1:8545`
4. 网络名称尝试使用 `Local Testnet` 或 `Localhost 8545`

### 问题 2：无法连接到本地网络

**检查步骤：**

1. 确认 Hardhat 节点正在运行：`npx hardhat node`
2. 检查端口 8545 是否被占用：`lsof -i :8545`
3. 尝试在浏览器访问：`http://localhost:8545`

### 问题 3：账户余额显示为 0

**可能原因：**

1. 网络配置错误
2. 导入了错误的私钥
3. Hardhat 节点重启后状态重置

**解决方案：**

1. 重新导入正确的测试账户私钥
2. 确认网络配置正确
3. 重启 MetaMask 并重新连接
